<eww>
    <includes>
    </includes>
    <definitions>
        <def name="pfp">
            <box>
                <image path="/home/matei/Pictures/pfp.png" width="200" height="200"/>
            </box>
        </def>
        <def name="stats">
            <box>\n   {{uptime}}\n   {{cpu}}%\n ﬙  {{memory}}\n   {{disk}}\n</box>
        </def>
        <def name="info">
            <box>\n   {{packages}}\n   {{updates}}\n   {{desktop}}\n 墳  {{volume}}%\n</box>
        </def>
        <def name="song">
            <box>\n   {{song}}\n</box>
        </def>
        <def name="next">
            <button onclick="mpc next">怜</button>
        </def>
        <def name="prev">
            <button onclick="mpc prev">玲</button>
        </def>
        <def name="play">
            <button onclick="mpc toggle">契</button>
        </def>
    </definitions>
    <variables>
        <script-var name="song" interval="500ms">mpc current</script-var>
        <script-var name="desktop" interval="500ms">bspc query -D -d focused --names</script-var>
        <script-var name="volume" interval="1s">pamixer --get-volume</script-var>

        <script-var name="packages" interval="1s">paru -Q | wc -l</script-var>
        <script-var name="updates" interval="30m">paru -Qu | wc -l</script-var>

        <script-var name="uptime" interval="1s">uptime -p | cut -b 4-999</script-var>
        <script-var name="cpu" interval="1s">LC_ALL=C top -bn1 | grep "Cpu(s)" | sed "s/.*, *\([0-9.]*\)%* id.*/\1/" | awk '{print 100 - $1}'</script-var>
        <script-var name="memory" interval="1s">free -m | awk 'NR==2{printf "%s/%s MB\n", $3,$2,$3*100/$2 }'</script-var>
        <script-var name="disk" interval="30s">df -h / | awk '/\// {print $(NF-1)}'</script-var>

        <script-var name="user" interval="10m">echo $USER | sed -e "s/\b\(.\)/\u\1/g"</script-var>
        <script-var name="clock" interval="300ms">date +%H:%M:%S</script-var>
        <script-var name="weather" interval="5m">ansiweather -w false -h false -s false -d false -a false -l dubai -p false -i false | cut -c 20- | sed 's/.$//'</script-var>
    </variables>
    <windows>
        <window name="stats" stacking="fg" focusable="false">
            <geometry anchor="center" x="10" y="50" width="420px" height="100px" />
            <widget>
                <stats />
            </widget>
        </window>
        <window name="pfp" stacking="fg" focusable="false">
            <geometry anchor="center" x="-100" y="-145" width="200px" height="200px"/>
            <widget>
                <pfp />
            </widget>
        </window>
        <window name="info" stacking="fg" focusable="false">
            <geometry anchor="center" x="120" y="-145"
            width="200px" height="200px"/>
            <widget>
                <info />
            </widget>
        </window>
        <window name="song" stacking="fg" focusable="false">
            <geometry anchor="center" x="-60" y="180"
            width="560px" height="50px"/>
            <widget>
                <song />
            </widget>
        </window>
        <window name="next" stacking="fg" focusable="false">
            <geometry anchor="center" x="-280" y="-195px"
            width="125px" height="100px"/>
            <widget>
                <next />
            </widget>
        </window>
        <window name="prev" stacking="fg" focusable="false">
            <geometry anchor="center" x="-280" y="40"
            width="125px" height="100px"/>
            <widget>
                <prev />
            </widget>
        </window>
        <window name="play" stacking="fg" focusable="false">
            <geometry anchor="center" x="-280" y="-80"
            width="125px" height="100px"/>
            <widget>
                <play />
            </widget>
        </window>
    </windows>
</eww>
